.. _java_face_embedder_example:    

Java Face Embedder Example
^^^^^^^^^^^^^^^^^^^^^^^^^^

Initialize face embedder model

.. code-block:: java

    import org.sertiscorp.oneml.face.*;
    FaceEmbedder embedder = new FaceEmbedder();

Initialize face embedder model with licensing

.. code-block:: java

    import org.sertiscorp.oneml.face.*;
    LicenseManager license_manager = new LicenseManager();
    license_manager.set_key("LICENSE_KEY_VALUE_HERE");
    license_manager.activate_key();
    FaceEmbedder embedder = new FaceEmbedder(license_manager);

Initialize oneML's Utils

.. code-block:: java

    Utils utils = new Utils();

Initialize oneML's Utils with licensing

.. code-block:: java

    Utils utils = new Utils(license_manager);
    
Read input as BufferedImage

.. code-block:: java

    BufferedImage img = getImage(path);
    int width = img.getWidth();
    int height = img.getHeight();
    short depth = (short) img.getColorModel().getPixelSize();
    byte[] byteArray = toRGBByteArray(img);

    ImageBatch batch = new ImageBatch().add(byteArray, width, height, depth);

Read input as oneML's Image

    .. code-block:: java
    
        Image img = utils.readImageCV(file_path);

Run the model

.. code-block:: java

    FaceEmbedderResultList results = embedder.embed(batch);

or

.. code-block:: java

    FaceEmbedderResult result = embedder.embed(img);

To enable flipped image embedding, run

.. code-block:: java

    FaceEmbedderResult result = embedder.embed(img, true);

And get the output

.. code-block:: java

    float[] emb = result.getEmbedding();
    int status = result.getReturnStatus();